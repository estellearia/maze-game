<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Undertale Maze Game</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

  body {
    margin: 0;
    font-family: 'Press Start 2P', monospace;
    background: black;
    color: white;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }
  canvas {
    border: 4px solid white;
    background: #000;
    image-rendering: pixelated;
  }
  #instructions {
    margin-top: 12px;
    font-size: 12px;
    color: #87cefa;
    max-width: 400px;
    text-align: center;
  }
  button {
    margin-top: 12px;
    font-family: 'Press Start 2P', monospace;
    font-size: 10px;
    padding: 6px 12px;
    background: black;
    color: white;
    border: 2px solid white;
    cursor: pointer;
    user-select: none;
    transition: background 0.3s, color 0.3s;
  }
  button:hover {
    background: white;
    color: black;
  }
</style>
</head>
<body>

<canvas id="maze" width="400" height="400"></canvas>
<div id="instructions">Use arrow keys to move the white square to the green finish tile.</div>
<button id="resetBtn">Reset Game</button>

<script>
  const canvas = document.getElementById("maze");
  const ctx = canvas.getContext("2d");
  const tileSize = 40;

  // Maze grid: 1=wall, 0=path, 2=finish
  const maze = [
    [1,1,1,1,1,1,1,1,1,1],
    [1,0,0,0,1,0,0,0,0,1],
    [1,0,1,0,1,0,1,1,0,1],
    [1,0,1,0,0,0,0,1,0,1],
    [1,0,1,1,1,1,0,1,0,1],
    [1,0,0,0,0,1,0,1,0,1],
    [1,1,1,1,0,1,0,1,0,1],
    [1,0,0,1,0,1,0,0,0,1],
    [1,0,0,0,0,1,1,1,0,2],
    [1,1,1,1,1,1,1,1,1,1]
  ];

  let player = { x: 1, y: 1 };
  let gameOver = false;

  function drawPixelRect(x, y, size, fillColor, strokeColor) {
    ctx.fillStyle = fillColor;
    ctx.fillRect(x, y, size, size);
    ctx.strokeStyle = strokeColor;
    ctx.lineWidth = 2;
    ctx.strokeRect(x + 1, y + 1, size - 2, size - 2);
  }

  function drawMaze() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    for (let y = 0; y < maze.length; y++) {
      for (let x = 0; x < maze[y].length; x++) {
        const px = x * tileSize;
        const py = y * tileSize;
        if (maze[y][x] === 1) {
          // Wall: dark grey block with black border for pixel style
          drawPixelRect(px, py, tileSize, "#666", "black");
        } else if (maze[y][x] === 2) {
          // Finish tile: bright green with white pixel border
          drawPixelRect(px, py, tileSize, "#0f0", "white");
          // Draw a simple pixel heart in center
          drawHeart(px + tileSize/2, py + tileSize/2, 10, "#b22222");
        } else {
          // Path: solid black tile with thin grey outline
          ctx.fillStyle = "#000";
          ctx.fillRect(px, py, tileSize, tileSize);
          ctx.strokeStyle = "#222";
          ctx.lineWidth = 1;
          ctx.strokeRect(px, py, tileSize, tileSize);
        }
      }
    }
    // Draw player as white block with black pixel border
    drawPixelRect(player.x * tileSize, player.y * tileSize, tileSize, "white", "black");
  }

  // Draw a simple pixel heart shape centered at (cx, cy) with size s and color fillColor
  function drawHeart(cx, cy, s, fillColor) {
    ctx.fillStyle = fillColor;
    const size = s;
    // Pixels for heart shape relative positions (like a pixel art heart)
    const pixels = [
      [-1, 0], [0, -1], [1, 0], [0, 1], // cross shape
      [-1, -1], [1, -1], [-1, 1], [1, 1],
      [0, 0]
    ];
    pixels.forEach(([dx, dy]) => {
      ctx.fillRect(cx + dx * size/2, cy + dy * size/2, size/2, size/2);
    });
  }

  function move(dx, dy) {
    if(gameOver) return;
    const newX = player.x + dx;
    const newY = player.y + dy;
    if (maze[newY][newX] !== 1) {
      player.x = newX;
      player.y = newY;
      drawMaze();

      if (maze[player.y][player.x] === 2) {
        gameOver = true;
        // Redirect to #lovequizcorrect
        window.location.href = "#lovequizcorrect";
      }
    }
  }

  document.addEventListener("keydown", (e) => {
    if (e.key === "ArrowUp") move(0, -1);
    else if (e.key === "ArrowDown") move(0, 1);
    else if (e.key === "ArrowLeft") move(-1, 0);
    else if (e.key === "ArrowRight") move(1, 0);
  });

  document.getElementById('resetBtn').addEventListener('click', () => {
    player = { x: 1, y: 1 };
    gameOver = false;
    drawMaze();
  });

  drawMaze();
</script>

</body>
</html>
